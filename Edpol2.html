


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cannabis: A Historical & Societal Exploration</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <style>
        /* Reset and Minimalist Layout */
        body, html { 
            margin: 0; 
            padding: 0; 
            height: 100%; 
            width: 100%; 
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; 
            background-color: #f8f9fa; 
        }

        #map { 
            height: 100vh; 
            width: 100vw; 
            background: #f4f4f4; /* Neutral ocean color */
        }

        /* Minimalist Tooltip Styles */
        .custom-tooltip {
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid #e0e0e0;
            border-radius: 2px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            padding: 15px;
            min-width: 1200px; /* Force it wide */
            width: 1200px; /* Fixed width */
            font-size: 14px;
            color: #333;
            white-space: normal; /* Allow text wrapping */
            font-family: 'Georgia', serif; /* Slightly more editorial feel for text */
        }

        .tooltip-header {
            font-family: 'Helvetica Neue', sans-serif;
            font-weight: 700;
            margin-bottom: 4px;
            color: #2c3e50;
            display: block;
            margin-top: 12px;
            text-transform: uppercase;
            font-size: 11px;
            letter-spacing: 0.5px;
        }

        .tooltip-header:first-child { 
            margin-top: 0; 
        }

        .tooltip-text { 
            margin: 0; 
            line-height: 1.6; 
            color: #4a4a4a;
        }

        /* Clean up Leaflet attribution */
        .leaflet-container .leaflet-control-attribution {
            background: rgba(255, 255, 255, 0.7);
            margin: 0;
        }
    </style>
</head>
<body>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
    // 1. Initialize Map
    // Using a neutral starting view
    const map = L.map('map', {
        center: [30, 0],
        zoom: 2.5,
        zoomControl: false, // We will re-add zoom control to a better position
        minZoom: 2,
        maxBounds: [[-90, -180], [90, 180]]
    });

    // Minimalist Zoom Control (Bottom Right)
    L.control.zoom({ position: 'bottomright' }).addTo(map);

    // Minimalist Tile Layer (CartoDB Positron - very clean, no clutter)
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: 'abcd',
        maxZoom: 19
    }).addTo(map);

    // 2. Define Data 
    // Extracted strictly from the provided PDF content.
    // Grouped by modern country names to match GeoJSON properties.
    const cannabisHistory = {
        "China": [
            {
                period: "20 Million Years Ago",
                text: "The cannabis plant has a deep evolutionary history, first appearing roughly 20 million years ago near Lake Qinghai on the Tibetan Plateau. This occurred after an evolutionary divergence where hops and cannabinoids split from their parent family, Cannabaceae. The region's unique high-altitude climate likely played a role in the plant's development, marking the very beginning of its biological existence long before human cultivation began."
            },
            {
                period: "2800 BCE",
                text: "China is home to the first recorded relationship between humans and cannabis. Emperor Shen Nung, known as the father of Chinese medicine, documented the plant's extensive medicinal properties in his pharmacopoeia. It was prescribed to treat a wide array of ailments including arthritis, depression, amenorrhea, inflammation, and asthma. This early acceptance highlights a stark contrast to modern policies, illustrating how ancient societies viewed the plant primarily as a healing agent rather than an illicit drug."
            }
        ],
        "Ukraine": [ 
            // NOTE: The Scythians were nomadic across the Eurasian Steppe. 
            // We map this to Ukraine as it covers the Pontic-Caspian steppe, a central historical region for Scythian activity.
            {
                period: "900–200 BCE",
                text: "The Scythians, a nomadic people, utilized cannabis for military purposes. According to the Greek historian Herodotus, they would construct small tent-like structures and burn cannabis seeds and flowers on hot stones inside. The resulting vapor acted as a 'bath' that they would inhale before battle. This practice was not merely recreational, it was believed to suppress pain and induce a state of fearlessness, effectively serving as a performance-enhancing tool for warfare."
            }
        ],
        "India": [
            {
                period: "Ancient Era",
                text: "In ancient India, cannabis became linked with spirituality and the divine. The plant was consumed to worship the Hindu god Shiva, who was given the title 'The Lord of Bhang.' Bhang, a preparation of cannabis, milk, and spices, was consumed by devotees to enter a deep meditative state and connect with the divine. This tradition exemplifies how a plant can influence societies in ways as fundamental as religious practice."
            }
        ],
        "Jamaica": [
            {
                period: "1930s",
                text: "The Rastafari movement, emerging in 1930s Jamaica, adopted ganja (referred to as marijuana) as a central spiritual tenet. Popularized globally by figures like Bob Marley, the movement views the consumption of cannabis not as drug use, but as a holy act that aids in meditation and brings the believer closer to Jah (God). This cultural practice reframed the plant as a tool for spiritual enlightenment and resistance against oppression, solidifying its potential to shape modern religious identity."
            }
        ],
        "United States of America": [
            {
                period: "1970s–1980s",
                text: "During the War on Drugs, cannabis policy was weaponized by the U.S. government to target specific social groups. As later admitted by Nixon's domestic policy advisor, the administration couldn't make it illegal to be Black or anti-war, so they criminalized the substances associated with these groups—marijuana for 'hippies' and heroin for Black communities. This strategy allowed the state to disrupt meetings, raid homes, and vilify these communities on the evening news, revealing how drug policy was used as a tool for systemic oppression."
            },
            {
                period: "2010s–Present",
                text: "Cannabis legalization shows how Indigenous sovereignty is under siege. Tribal nations like the St. Croix Chippewa in Wisconsin see the plant as a vital economic opportunity and a potential substitute for opioids. However, complex legal frameworks like Public Law 280 subordinate tribal authority to state law. This means that even if a tribe wishes to legalize cannabis for medicinal or economic reasons, they may be blocked by state prohibitions even though treaty rights and court decisions have affirmed their independence from state law. Legalization around marijuana highlights issues of self-determination."
            },
            {
                period: "Present Day",
                text: "The impact of cannabis on tribal communities is complex and multifaceted. Research indicates that 8th and 10th graders living on or near reservations are significantly more likely to have tried marijuana than their peers in the states. This disparity is similar to that of alcohol use on the reservation spawned by historical U.S. Indian removal policies. Thus, the plant's interactions with Indigenous communities create two realities: a potential source of economic healing for the tribe, but also a substance that poses health risks to its youth."
            }
        ]
    };

    // 3. Helper Functions
    
    // Create HTML content for the tooltip
    function createTooltipContent(countryName, data) {
        let html = ``;
        data.forEach(entry => {
            html += `<span class="tooltip-header">${entry.period} – ${countryName}</span>`;
            html += `<p class="tooltip-text">${entry.text}</p>`;
        });
        return html;
    }

    // Define style for countries: Subtle green for those with history, transparent/grey for others
    function style(feature) {
        const hasHistory = cannabisHistory.hasOwnProperty(feature.properties.name);
        return {
            fillColor: hasHistory ? '#56ab2f' : 'transparent', 
            weight: hasHistory ? 1 : 0.5,
            opacity: 1,
            color: hasHistory ? '#56ab2f' : '#ccc',
            fillOpacity: hasHistory ? 0.4 : 0
        };
    }

    // Interaction handlers
    function highlightFeature(e) {
        var layer = e.target;
        const countryName = layer.feature.properties.name;

        if (cannabisHistory[countryName]) {
            layer.setStyle({
                weight: 2,
                color: '#333',
                fillOpacity: 0.6
            });
            layer.bringToFront();
        }
    }

    function resetHighlight(e) {
        geojson.resetStyle(e.target);
    }

    // 4. Load GeoJSON and render
    let geojson;
    
    // Using a reliable CDN for World Countries GeoJSON
    fetch('https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json')
        .then(response => response.json())
        .then(data => {
            geojson = L.geoJson(data, {
                style: style,
                onEachFeature: function(feature, layer) {
                    const countryName = feature.properties.name;
                    
                    // Only add interactions to countries present in our history data
                    if (cannabisHistory[countryName]) {
                        
                        layer.bindTooltip(createTooltipContent(countryName, cannabisHistory[countryName]), {
                            className: 'custom-tooltip',
                            direction: 'top',
                            sticky: true, // Tooltip follows the mouse
                            opacity: 1
                        });

                        layer.on({
                            mouseover: highlightFeature,
                            mouseout: resetHighlight
                        });
                    }
                }
            }).addTo(map);
        })
        .catch(error => {
            console.error('Error loading map data:', error);
            document.getElementById('map').innerHTML = '<p style="text-align:center; padding-top: 50px;">Error loading map data. Please check your internet connection.</p>';
        });

</script>
</body>
</html>
```